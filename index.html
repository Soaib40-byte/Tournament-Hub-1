<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Tournament App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --bg: #050b18;
            --card-bg: rgba(255, 255, 255, 0.05);
            --accent: #ff4757;
            --text: #ffffff;
        }

        body {
            background: radial-gradient(circle at top, #1a2a6c, #b21f1f, #fdbb2d);
            background-attachment: fixed;
            background-size: cover;
            font-family: 'Poppins', sans-serif;
            color: var(--text);
            margin: 0;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        .container { padding: 20px; max-width: 500px; margin: auto; }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
        }

        #login-screen {
            display: flex;
            flex-direction: column;
            height: 90vh;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .telegram-btn {
            background: #0088cc;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }

        .match-card {
            position: relative;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .match-banner {
            height: 120px;
            background: url('https://img.freepik.com/premium-photo/fire-background-gaming-banner_1029473-195973.jpg') center/cover;
            display: flex;
            align-items: flex-end;
            padding: 10px;
            font-weight: bold;
        }

        .match-info { padding: 15px; }
        .match-details { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; opacity: 0.8; }

        .btn-action {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 0 0 15px 15px;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-join { background: linear-gradient(to right, #00d2ff, #3a7bd5); color: white; }
        .btn-joined { background: #4b4b4b; color: #aaa; cursor: not-allowed; }

        .navbar {
            position: fixed; bottom: 15px; left: 15px; right: 15px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            display: flex; justify-content: space-around;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }

        .nav-item { color: #888; font-size: 1.2em; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--primary); transform: translateY(-5px); }

        .hidden { display: none !important; }

        /* Custom Modal Styles */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex; align-items: center; justify-content: center;
            z-index: 2000;
        }
        .modal-input {
            width: 100%; padding: 12px; margin: 15px 0;
            border-radius: 10px; border: 1px solid #00d2ff;
            background: rgba(255,255,255,0.1); color: white; outline: none;
            box-sizing: border-box;
        }

        .timer-red { color: #ff4757; font-weight: bold; }
        .wallet-balance { font-size: 2em; font-weight: bold; color: #2ed573; margin: 10px 0; }
   .match-extra-buttons{
    display:flex;
    gap:10px;
    margin-top:12px;
}

.extra-btn{
    flex:1;
    padding:10px;
    border:none;
    border-radius:10px;
    font-size:14px;
    font-weight:bold;
    cursor:pointer;
    background:rgba(255,255,255,0.08);
    color:#fff;
    border:1px solid rgba(255,255,255,0.15);
}

.extra-btn i{
    margin-right:6px;
}

.extra-btn:active{
    transform:scale(0.97);
}
    
    </style>
</head>
<body>

<div id="login-screen" class="container">
    <div class="glass-card">
        <i class="fab fa-telegram-plane" style="font-size: 4em; color: #0088cc;"></i>
        <h1>Welcome Back</h1>
        <p>Login with Telegram to access matches</p>
        <button class="telegram-btn" onclick="login()">
            <i class="fab fa-telegram"></i> Login with Telegram
        </button>
    </div>
</div>

<div id="app-ui" class="hidden">

    <div id="home-sec" class="container">
        <h2 style="display:flex; justify-content: space-between; align-items: center;">
            Explore Games <span id="top-balance" style="font-size: 0.6em; background: #2ed573; padding: 5px 12px; border-radius: 20px;">‡ß≥ 0</span>
        </h2>
        <div class="match-card glass-card" onclick="showFFSection()" style="cursor: pointer;">
            <div class="match-banner">FREE FIRE MAX</div>
            <div class="match-info">1 Matches Available</div>
        </div>
        <div class="match-card glass-card" style="opacity: 0.6;">
            <div class="match-banner" style="filter: grayscale(1);">BLOOD STRIKE</div>
            <div class="match-info">Coming Soon...</div>
        </div>
    </div>
<!-- FREE FIRE SECTION -->
<div id="ff-sec" class="container hidden">
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:20px;">
        <i class="fas fa-chevron-left" onclick="showHome()"></i>
        <h3>BR - Solo Matches</h3>
    </div>

    <div id="matchContainer"></div>
</div>

<!-- PROFILE SECTION -->
<div id="profile-sec" class="container hidden">
    <div class="glass-card" style="text-align:center;">
        <img src="https://ui-avatars.com/api/?name=User&background=00d2ff&color=fff"
             style="width:80px;border-radius:50%;border:3px solid var(--primary);">
        <h2 id="u-name">Player One</h2>
        <p>@telegram_user</p>
    </div>

    <div style="display:flex;gap:15px;">
        <div class="glass-card" style="flex:1;text-align:center;">
            <p style="margin:0;font-size:0.9em;opacity:0.8;">Matches</p>
            <h3 id="matches-count" style="margin:5px 0 0 0;">0</h3>
        </div>
        <div class="glass-card" style="flex:1;text-align:center;">
            <p style="margin:0;font-size:0.9em;opacity:0.8;">Earnings</p>
            <h3 style="margin:5px 0 0 0;">‡ß≥ 0</h3>
        </div>
    </div>
</div>

<!-- WALLET SECTION -->
<div id="wallet-sec" class="container hidden">
    <div class="glass-card" style="text-align:center;">
        <h3>My Wallet</h3>
        <div class="wallet-balance">‡ß≥ <span id="current-balance">0</span></div>

        <div style="display:flex;gap:10px;">
            <button class="telegram-btn" style="flex:1;background:#2196f3;"
                    onclick="showAddMoney()">
                <i class="fas fa-plus"></i> Add Money
            </button>
            <button class="telegram-btn" style="flex:1;background:#4caf50;"
                    onclick="handleWithdraw()">
                <i class="fas fa-university"></i> Withdraw
            </button>
        </div>
    </div>

    <div id="add-money-list" class="hidden">
        <h4>Select Method</h4>
        <div class="glass-card"
             onclick="payVia('Bkash')"
             style="display:flex;justify-content:space-between;align-items:center;cursor:pointer;">
            <span>Bkash Payment</span>
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="glass-card" style="opacity:0.5;">Nagad (Coming Soon)</div>
    </div>
</div>

            <div class="glass-card" style="opacity: 0.5;">Nagad (Coming Soon)</div>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-item active" id="n-home" onclick="showHome()"><i class="fas fa-home"></i></div>
        <div id="n-wallet" class="nav-item" onclick="showWallet()"><i class="fas fa-wallet"></i></div>
        <div id="n-profile" class="nav-item" onclick="showProfile()"><i class="fas fa-user"></i></div>
    </nav>
</div>

<div id="custom-modal" class="modal-overlay hidden">
    <div class="glass-card" style="width: 90%; max-width: 350px; text-align: center;">
        <h3 id="modal-title">Title</h3>
        <p id="modal-desc" style="font-size: 0.9em; opacity: 0.8;"></p>
        <input type="text" id="modal-input" class="modal-input">
        <div style="display: flex; gap: 10px;">
            <button onclick="closeModal()" style="flex:1; padding:12px; border-radius:10px; border:none; background:#ff4757; color:white;">Cancel</button>
            <button id="modal-confirm" style="flex:1; padding:12px; border-radius:10px; border:none; background:#2ed573; color:white;">Confirm</button>
        </div>
    </div>
</div>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDgBrES-3lWjeFVo6vz3jfMOyCl_tgy_RQ",
    authDomain: "tournament-hub-a936a.firebaseapp.com",
    databaseURL: "https://tournament-hub-a936a-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "tournament-hub-a936a",
    storageBucket: "tournament-hub-a936a.appspot.com",
    messagingSenderId: "968072956918",
    appId: "1:968072956918:web:fee6b8c7cfdf1f77c115d7"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Realtime Database reference
  const db = firebase.database();
</script>
    <script>
    let balance = 0;
    let joined = false;
    let mCount = 0;
let userId = localStorage.getItem("uid"); if (!userId) {     userId = "uid_" + Date.now();     localStorage.setItem("uid", userId); }


    function login() {
        localStorage.setItem('loggedIn', 'true');
        checkAuth();
    }

    function checkAuth() {
        if(localStorage.getItem('loggedIn')) {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('app-ui').classList.remove('hidden');
            db.ref("users/" + userId + "/balance").once("value", snap => {
    if (snap.val() === null) {
        db.ref("users/" + userId + "/balance").set(0);
    }
});
            db.ref("users/" + userId + "/balance").on("value", snapshot => {
    balance = snapshot.val() || 0;

});


db.ref("users/" + userId + "/matches").on("value", function(snapshot){
    mCount = snapshot.val() || 0;
    updateUI();
});
db.ref("users/" + userId + "/joined").once("value", function(snap){
    joined = snap.val() || false;
});
            
            updateUI();
        }
    }

    function openModal(title, desc, placeholder, callback) {
        const modal = document.getElementById('custom-modal');
        document.getElementById('modal-title').innerText = title;
        document.getElementById('modal-desc').innerText = desc;
        const input = document.getElementById('modal-input');
        input.placeholder = placeholder;
        input.value = "";
        modal.classList.remove('hidden');

        document.getElementById('modal-confirm').onclick = () => {
            let val = input.value;
            if(val.trim() !== "") {
                callback(val);
                closeModal();
            }
        };
    }

    function closeModal() { document.getElementById('custom-modal').classList.add('hidden'); }

    function showHome() { hideAll(); document.getElementById('home-sec').classList.remove('hidden'); setActiveNav('n-home'); }
    function showFFSection() { hideAll(); document.getElementById('ff-sec').classList.remove('hidden'); }
    function showProfile() { hideAll(); document.getElementById('profile-sec').classList.remove('hidden'); setActiveNav('n-profile'); }
    function showWallet() { hideAll(); document.getElementById('wallet-sec').classList.remove('hidden'); setActiveNav('n-wallet'); }
    function hideAll() {
        ['home-sec', 'ff-sec', 'profile-sec', 'wallet-sec'].forEach(s => document.getElementById(s).classList.add('hidden'));
        document.getElementById('add-money-list').classList.add('hidden');
    }
    function setActiveNav(id) {
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function showAddMoney() { document.getElementById('add-money-list').classList.remove('hidden'); }


function payVia(method) {

    // STEP 1: Ask Amount
    openModal(
        "Add Money",
        "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ Add ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?",
        "50",
        (amountInput) => {

            const amount = Number(amountInput);

            if (!amount || amount < 10) {
                alert("‚ùå ‡¶∏‡¶†‡¶ø‡¶ï Amount ‡¶¶‡¶ø‡¶® (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)");
                return;
            }

            // üî¥ IMPORTANT: close first modal manually
            closeModal();

            // STEP 2: Ask Transaction ID (delay ‡¶¶‡¶ø‡ßü‡ßá)
            setTimeout(() => {
                openModal(
                    `${method} Payment`,
                    `${method} 01989118735 ‡¶è‡¶á ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ${amount} ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá Transaction ID ‡¶¶‡¶ø‡¶®`,
                    "Transaction ID ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®",
                    (tid) => {

                        db.ref("depositRequests").push({
                            userId: userId,
                            method: method,
                            amount: amount,
                            transactionId: tid,
                            status: "pending",
                            time: Date.now()
                        });

                        alert("‚úÖ Add Money Request Admin ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá");
                    }
                );
            }, 300);
        }
    );
}
function handleJoin(matchId, entryFee) {

    openModal(
        "Join Match",
        "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Free Fire ID ‡¶¶‡¶ø‡¶®",
        "PlayerName",
        (ign) => {

            if (!ign || ign.trim() === "") {
                alert("‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡ßá‡¶Æ ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®");
                return;
            }

            closeModal();

            if (balance < entryFee) {
                alert("‚ùå ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á");
                return;
            }

            // üîí single & correct check
            db.ref("users/" + userId + "/joinedMatches/" + matchId)
              .once("value", snap => {

                  if (snap.exists()) {
                      alert("‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶á ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡ßá Join ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®");
                      return;
                  }

                  // ‚úÖ balance cut
                  db.ref("users/" + userId + "/balance")
                    .set(balance - entryFee);

                  // ‚úÖ save join
                  db.ref("users/" + userId + "/joinedMatches/" + matchId)
                    .set({
                        ign: ign,
                        time: Date.now()
                    });
                    // ‡ß™‡ß™‡ß≠ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶†‡¶ø‡¶ï ‡¶™‡¶∞‡ßá ‡¶è‡¶ü‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
db.ref("matchPlayers/" + matchId + "/" + userId).set({
    gameName: ign, 
    userId: userId
});

db.ref("users/" + userId + "/matches")
  .transaction(count => (count || 0) + 1);
                  updateUI();

                  const btn = document.getElementById("join-btn-" + matchId);
                  if (btn) {
                      btn.innerText = "JOINED ‚úÖ";
                      btn.disabled = true;
                      btn.className = "btn-action btn-joined";
                  }
              });
        }
    );
}
    function handleWithdraw() {
    // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ú‡¶æ‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡¶™‡¶Ü‡¶™
    openModal(
        "Withdraw Money",
        "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ Withdraw ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®? (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)",
        "50",
        (amountInput) => {
            const amount = Number(amountInput);

            // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ö‡ßá‡¶ï
            if (!amount || amount < 50) {
                alert("‚ùå ‡¶∏‡¶†‡¶ø‡¶ï Amount ‡¶¶‡¶ø‡¶® (‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)");
                return;
            }
            if (balance < amount) {
                alert("‚ùå ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á");
                return;
            }

            closeModal();

            // ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶®‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡ßü ‡¶™‡¶™‡¶Ü‡¶™ (‡ß©‡ß¶‡ß¶ ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞‡¶ü‡¶æ ‡¶†‡¶ø‡¶ï‡¶†‡¶æ‡¶ï ‡¶¨‡¶®‡ßç‡¶ß ‡¶π‡ßü)
            setTimeout(() => {
                openModal(
                    "Withdraw Request",
                    "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Bkash/Nagad ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶ü‡¶ø ‡¶¶‡¶ø‡¶®",
                    "017XXXXXXXX",
                    (accountNumber) => {
                        // ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ
                        db.ref("withdrawRequests").push({
                            userId: userId,
                            amount: amount,
                            accountNumber: accountNumber,
                            status: "pending",
                            time: Date.now()
                        });

                        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶ï‡¶Æ‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ
                        db.ref("users/" + userId + "/balance").set(balance - amount);

                        alert("‚úÖ Withdraw ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶¨‡ßá‡•§");
                    }
                );
            }, 300);
        }
    );
}

    function updateUI() {
    document.getElementById('current-balance').innerText = balance;
    document.getElementById('top-balance').innerText = "‡ß≥ " + balance;
    document.getElementById('matches-count').innerText = mCount;
}

// Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡¶ó‡ßÅ‡¶≤‡ßã ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶è‡¶¨‡¶Ç UI-‡¶§‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
db.ref('matches').on('value', (snap) => {
    const container = document.getElementById('matchContainer');
    container.innerHTML = ''; // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ

    snap.forEach((child) => {
        const m = child.val();
        const mId = child.key;

        // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ Free Fire ‡¶ó‡ßá‡¶Æ‡ßá‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
        if (m.game === "Free Fire") {
            const card = document.createElement('div');
            card.className = 'match-card glass-card';
            
            card.innerHTML = `
                <div class="match-banner">${m.title}</div>
                <div class="match-info">
                    <div class="match-details">
                        <span><i class="fas fa-money-bill"></i> Entry: ‡ß≥${m.entryFee}</span>
                        <span><i class="fas fa-trophy"></i> Prize: ‡ß≥${m.prize}</span>
                        <span><i class="fas fa-gamepad"></i> Mode: ${m.type}</span>
                        <span><i class="fas fa-clock"></i> ${m.time}</span>
                    </div>
                    <div class="match-extra-buttons">
<button class="extra-btn" onclick="showDetails('${mId}')"><i class="fas fa-info-circle"></i> Details</button>
                        <button class="extra-btn" onclick="showPlayers('${mId}')"><i class="fas fa-list"></i> Players</button>

                    </div>
                </div>
                <button id="join-btn-${mId}" 
                    class="btn-action btn-join" 
                    onclick="handleJoin('${mId}', ${m.entryFee})">
                    JOIN NOW
                </button>
            `;
            container.appendChild(card);

            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
            db.ref("users/" + userId + "/joinedMatches/" + mId).once("value", (jSnap) => {
                if (jSnap.exists()) {
                    const btn = document.getElementById("join-btn-" + mId);
                    if (btn) {
                        btn.innerText = "JOINED ‚úÖ";
                        btn.disabled = true;
                        btn.className = "btn-action btn-joined";
                    }
                }
            });
        }
    });
});
function showPlayers(matchId) {
    db.ref("matchPlayers/" + matchId).once("value", (snap) => {
        if (!snap.exists()) {
            alert("‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßá‡¶â ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶®‡¶ø!");
            return;
        }
        
        let playerList = "‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡¶æ ‡¶™‡ßç‡¶≤‡ßá‡ßü‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ:\n";
        let count = 1;
        snap.forEach((child) => {
            playerList += count + ". " + child.val().gameName + "\n";
            count++;
        });
        alert(playerList);
    });
}
function showDetails(matchId) {
    db.ref("matches/" + matchId).once("value", (snap) => {
        const m = snap.val();
        
        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶è‡¶á ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ (‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        db.ref("users/" + userId + "/joinedMatches/" + matchId).once("value", (jSnap) => {
            if (jSnap.exists()) {
                alert(`Match Details:\n\nRoom ID: ${m.roomId}\nPassword: ${m.roomPass}`);
            } else {
                alert("‚ö†Ô∏è ‡¶∞‡ßÅ‡¶Æ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶Ü‡¶ó‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ö‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
            }
        });
    });
}

    
    window.onload = checkAuth;

</script>
</body>
</html>